{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst express_1 = __importDefault(require(\"express\"));\n\nexports.default = ({\n  config,\n  realm\n}) => {\n  const app = express_1.default.Router(); // Retrieve guaranteed random ID.\n\n  app.get(\"/id\", (_, res) => {\n    res.contentType(\"html\");\n    res.send(realm.generateClientId(config.generateClientId));\n  }); // Get a list of all peers for a key, enabled by the `allowDiscovery` flag.\n\n  app.get(\"/peers\", (_, res) => {\n    if (config.allow_discovery) {\n      const clientsIds = realm.getClientsIds();\n      return res.send(clientsIds);\n    }\n\n    res.sendStatus(401);\n  });\n  return app;\n};","map":{"version":3,"sources":["/usr/local/lib/node_modules/peer/dist/src/api/v1/public/index.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","express_1","require","default","config","realm","app","Router","get","_","res","contentType","send","generateClientId","allow_discovery","clientsIds","getClientsIds","sendStatus"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,SAAS,GAAGP,eAAe,CAACQ,OAAO,CAAC,SAAD,CAAR,CAAjC;;AACAH,OAAO,CAACI,OAAR,GAAkB,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,KAAuB;AACrC,QAAMC,GAAG,GAAGL,SAAS,CAACE,OAAV,CAAkBI,MAAlB,EAAZ,CADqC,CAErC;;AACAD,EAAAA,GAAG,CAACE,GAAJ,CAAQ,KAAR,EAAe,CAACC,CAAD,EAAIC,GAAJ,KAAY;AACvBA,IAAAA,GAAG,CAACC,WAAJ,CAAgB,MAAhB;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAASP,KAAK,CAACQ,gBAAN,CAAuBT,MAAM,CAACS,gBAA9B,CAAT;AACH,GAHD,EAHqC,CAOrC;;AACAP,EAAAA,GAAG,CAACE,GAAJ,CAAQ,QAAR,EAAkB,CAACC,CAAD,EAAIC,GAAJ,KAAY;AAC1B,QAAIN,MAAM,CAACU,eAAX,EAA4B;AACxB,YAAMC,UAAU,GAAGV,KAAK,CAACW,aAAN,EAAnB;AACA,aAAON,GAAG,CAACE,IAAJ,CAASG,UAAT,CAAP;AACH;;AACDL,IAAAA,GAAG,CAACO,UAAJ,CAAe,GAAf;AACH,GAND;AAOA,SAAOX,GAAP;AACH,CAhBD","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst express_1 = __importDefault(require(\"express\"));\nexports.default = ({ config, realm }) => {\n    const app = express_1.default.Router();\n    // Retrieve guaranteed random ID.\n    app.get(\"/id\", (_, res) => {\n        res.contentType(\"html\");\n        res.send(realm.generateClientId(config.generateClientId));\n    });\n    // Get a list of all peers for a key, enabled by the `allowDiscovery` flag.\n    app.get(\"/peers\", (_, res) => {\n        if (config.allow_discovery) {\n            const clientsIds = realm.getClientsIds();\n            return res.send(clientsIds);\n        }\n        res.sendStatus(401);\n    });\n    return app;\n};\n"]},"metadata":{},"sourceType":"script"}